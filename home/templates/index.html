{% extends "base.html" %}
{% block start %}
    <nav class="navbar bg-dark p-3 bg-body-tertiary shadow-lg">
      <div class="container-fluid">
          <a class="navbar-brand" href="/">
            <h3>Top Gaming Laptops</h3>
          </a>
      </div>
    </nav>
    <div class="container my-4">
      <div class="row justify-content-center">
          <div class="col-auto">
            <div class="container" >
              <hr>
              {% if  messages %}
              {{messages.tags}}
              <div class="alert alert-info" role="alert">
                {% for message in messages %}
                {{message}}
                {% endfor %}
              </div>
              {% endif %}
              <a href="{% url 'send_email' %}" class="btn btn-success">Send Email</a>
              <a href="{% url 'set_price_alert' %}" class="btn btn-success">Set Price Alert</a>
              <hr>
            <form method="GET" action="/">
              <div class="input-group mb-4">
                  <input type="text" class="form-control" name="search" placeholder="Search any Name or Price" value="{{ request.GET.search }}">
                  <button class="btn btn-primary" type="submit">Search</button>
              </div>
          </form>
            <table class="table table-striped table-hover" style="width:100% ">
                <tr>
                  <th>Sr. No.</th>
                  <th>Name</th>
                  <th>Price (₹)</th>
                  <th>Description</th>
                </tr>
                {% for lap in laptops %}
                <tr>
                  <th>{{forloop.counter}}.</th>
                  <td>{{lap.Name}}</td>
                  <td>{{lap.Price}}</td>          
                  <td>{{lap.Description}}</td>          
                </tr> 
                {% endfor %}
              </table>

            {% if recommendations %}
            <hr>
            <h3>Recommended Laptops</h3>
            <table class="table table-striped table-hover" style="width:100% ">
                <tr>
                  <th>Sr. No.</th>
                  <th>Name</th>
                  <th>Price (₹)</th>
                  <th>Description</th>
                </tr>
                {% for rec in recommendations %}
                <tr>
                  <th>{{forloop.counter}}.</th>
                  <td>{{rec.Name}}</td>
                  <td>{{rec.Price}}</td>          
                  <td>{{rec.Description}}</td>          
                </tr> 
                {% endfor %}
              </table>
            {% endif %}

        </div>
        <nav aria-label="pagination">
          <ul class="pagination">
              {% if laptops.has_previous %}
              <li class="page-item"><a class="page-link" href="?page=1">&laquo; First</a></li>
              <li class="page-item"><a class="page-link" href="?page={{ laptops.previous_page_number }}">Previous</a></li>
              {% endif %}
              <span class="current">
                  <li class="page-item active" aria-current="page">
                      <span class="page-link">{{ laptops.number }}</span>
                    </li>
              </span>
              {% if laptops.has_next %}
              <li class="page-item"><a class="page-link" href="?page={{ laptops.next_page_number }}">Next</a></li>
              <li class="page-item"><a class="page-link" href="?page={{ laptops.paginator.num_pages }}">Last &raquo;</a></li>
              {% endif %}
      </ul>
    </nav> 
      </div>
    </div>  
{% endblock %}
